montageDefine("5747dc1","core/jsonp",{dependencies:["montage/core/core","query-params","url","montage/core/uuid","montage/core/promise"],factory:function(e,t){var n=e("montage/core/core").Montage,i=e("query-params"),r=e("url"),a=e("montage/core/uuid"),s=e("montage/core/promise").Promise;t.Jsonp=n.specialize({constructor:{value:function(){this.super()}}},{makeRequest:{value:function(e,t,n){var o,l=s.defer(),c=this,u=r.parse(e),h=i.decode(u.query||""),d=n?n+"ServiceCallback":"serviceCallback",p=d+a.generate().replace(/-/g,"_"),m=document.createElement("script");return window[p]=function(e){document.head.removeChild(m),delete window[p],c._handleResponse(e,l)},h[t?t:"callback"]=p,o=u.protocol+"//"+u.host+u.pathname+"?"+i.encode(h),m.src=o,document.head.appendChild(m),l.promise}},_handleResponse:{value:function(e,t){e?e.error?t.reject(Error(e.error)):t.resolve(e):t.reject(Error("Unknown API Error"))}}})}});